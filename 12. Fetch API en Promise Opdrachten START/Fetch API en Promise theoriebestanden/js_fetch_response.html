<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />

    <link rel="shortcut icon" href="#" />

    <title>Fetch basis response methods</title>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h1>Fetch basis response methods</h1>
          <div class="row" id="divResult"></div>
        </div>
      </div>
    </div>
  </body>

  <script>
    // Hieronder een asynchrone functie die wacht tot de Promise klaar is.
    async function testGitHub() {
      // We vragen een request aan github API voor een user
      let response = await fetch(`https://api.github.com/users/StijnTM`);

      // Als json
      let user = await response.json();
      console.log(user);
      console.log("Public repos: " + user.public_repos);

      // Als tekst, we vragen bijvoorbeeld een andere webpagina op
      let response2 = await fetch(`js_fetch_basis.html`);

      // Als text binnenhalen
      let tekst = await response2.text();
      console.log(tekst);

      // We vragen de headers op
      /**/
      // get one header
      console.log(response2.headers.get("Content-Type")); // application/json; charset=utf-8

      // iterate over all headers
      for (let [key, value] of response2.headers) {
        console.log(`${key} = ${value}`);
      }
    }

    testGitHub();
  </script>
</html>
